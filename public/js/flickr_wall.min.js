$(function(){var h=false;var e=1;$("#inputbutton").click(function(){d();g();f();b(1)});$(window).scroll(function(){if($(window).scrollTop()==($(document).height()-$(window).height())){if(h==false){h=true;f();c()}}});function f(){var k='<img id="loading" src="./img/loading.gif"       style="width:150px;height:150px;" />';$("#images").append(k)}function j(){$("#loading").remove()}function c(){e=e+1;b(e)}function d(){$("#images").html("")}function g(){$("#error_messages").html("")}function a(k){$("#images").append(k)}function i(k){var l="";$.each(k.photos.photo,function(n,m){photoLink="http://farm"+m.farm+".staticflickr.com/"+m.server+"/"+m.id+"_"+m.secret+"_q.jpg";largePhotoLink="http://farm"+m.farm+".staticflickr.com/"+m.server+"/"+m.id+"_"+m.secret+"_b.jpg";l+='<a href="'+largePhotoLink+'" target="_blank">';l+='<img title="'+m.title+'" src="'+photoLink;l+='" alt="';l+=m.title+'" />';l+="</a>"});return l}function b(m){var p=$("#inputtext").val();if(p.length==0){$("#error_messages").html("Please enter some image keywords");j();return}p=p.split(" ");p=p.join("+");var o="a4683145b23d24f7db5466c3ee23d329";var k="100";var l="http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key="+o+"&text="+p+"&per_page="+k+"&page="+m+"&format=json&jsoncallback=?";$.getJSON(l,n);function n(q){if(q.photos.total==0){$("#error_messages").html("There are no photos for your keywords");j();return}htmlString=i(q);j();a(htmlString);h=false}}});
