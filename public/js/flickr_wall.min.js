$(function(){var t=!1,i=1;function o(){$("#images").append('<img id="loading" src="./img/loading.gif"       style="width:150px;height:150px;" />')}function e(){$("#loading").remove()}function a(i){var o=$("#inputtext").val();if(0==o.length)return $("#error_messages").html("Please enter some image keywords"),void e();var a="https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=45a4f2f45aa9f0da86108bbf13da6b0c&text="+(o=(o=o.split(" ")).join("+"))+"&per_page=100&page="+i+"&format=json&jsoncallback=?";$.getJSON(a,function(i){if("fail"==i.stat)return $("#error_messages").html("Something went wrong - contact bcabalo@gmail.com to get this fixed."),void e();if(console.log(i),0==i.photos.total)return $("#error_messages").html("There are no photos for your keywords"),void e();pagination=function(t){console.log(t.photos.pages),pages=t.photos.pages,_htmlString='<div class="pagination"><ul><li><a href="#">&laquo;</a></li>';for(var i=0;i<pages;i++)_htmlString+='<li><a href="#">'+i+"</a></li><li>";return _htmlString+='<li><a href="#">&raquo;</a></li></ul></div>',_htmlString}(i),htmlString=function(t){var i="";return $.each(t.photos.photo,function(t,o){photoLink="http://farm"+o.farm+".staticflickr.com/"+o.server+"/"+o.id+"_"+o.secret+"_q.jpg",largePhotoLink="http://farm"+o.farm+".staticflickr.com/"+o.server+"/"+o.id+"_"+o.secret+"_b.jpg",i+='<a href="'+largePhotoLink+'" target="_blank">',i+='<img title="'+o.title+'" src="'+photoLink,i+='" alt="',i+=o.title+'" />',i+="</a>"}),i}(i),e(),o=pagination,$("#pagination").html(o),function(t){$("#images").append(t)}(htmlString),t=!1;var o}).fail(function(t,i,o){$("#error_messages").html("Something went wrong - contact bcabalo@gmail.com to get this fixed."),e()})}$("#inputbutton").click(function(){i=1,$("#images").html(""),$("#error_messages").html(""),o(),a(1)}),$("#inputtext").keypress(function(t){13==t.which&&$("#inputbutton").click()}),$(window).scroll(function(){$(window).scrollTop()==$(document).height()-$(window).height()&&0==t&&(t=!0,o(),a(i+=1))})});
