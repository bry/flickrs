$(function(){function n(){var e='<img id="loading" src="./img/loading.gif"       style="width:150px;height:150px;" />';$("#images").append(e)}function r(){$("#loading").remove()}function i(){t=t+1;f(t)}function s(){$("#images").html("")}function o(){$("#error_messages").html("")}function u(e){$("#images").append(e)}function a(e){var t="";$.each(e.photos.photo,function(e,n){photoLink="http://farm"+n.farm+".staticflickr.com/"+n.server+"/"+n.id+"_"+n.secret+"_q.jpg";largePhotoLink="http://farm"+n.farm+".staticflickr.com/"+n.server+"/"+n.id+"_"+n.secret+"_b.jpg";t+='<a href="'+largePhotoLink+'" target="_blank">';t+='<img title="'+n.title+'" src="'+photoLink;t+='" alt="';t+=n.title+'" />';t+="</a>"});return t}function f(t){function f(t){if(t.photos.total==0){$("#error_messages").html("There are no photos for your keywords");r();return}htmlString=a(t);r();u(htmlString);e=false}var n=$("#inputtext").val();if(n.length==0){$("#error_messages").html("Please enter some image keywords");r();return}n=n.split(" ");n=n.join("+");var i="a4683145b23d24f7db5466c3ee23d329";var s="100";var o="http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key="+i+"&text="+n+"&per_page="+s+"&page="+t+"&format=json&jsoncallback=?";$.getJSON(o,f)}var e=false;var t=1;$("#inputbutton").click(function(){t=1;s();o();n();f(1)});$("#inputtext").keypress(function(e){if(e.which==13){$("#inputbutton").click()}});$(window).scroll(function(){if($(window).scrollTop()==$(document).height()-$(window).height()){if(e==false){e=true;n();i()}}})})
